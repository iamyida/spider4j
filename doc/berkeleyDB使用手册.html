<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Berkeley DB Java Edition 使用手册 - muyannian的专栏 - 博客频道 - CSDN.NET</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<div id="container">
<div id="article_content" class="article_content">
<div align="center"><strong><font size="6">Berkeley DB Java Edition使用说明</font></strong></div>
<div align="center"><span style="FONT-SIZE: 12pt"><hr align="center" width="100%" size="2" /></span></div>
<div align="right"><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span><span style="FONT-SIZE: 9pt">头一次看英文文档，翻译的不是十分准确，而且还有错误，还请大家多多谅解。</span></div>
<div style="MARGIN-LEFT: 21pt; TEXT-INDENT: -21pt"><strong><span>一、<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong>简介</strong></div>
<div><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Berkeley DB Java Edition (JE)</span>是一个完全用JAVA写的，它适合于管理海量的，简单的数据。</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>能够高效率的处理1到1百万条记录，制约JE数据库的往往是硬件系统,而不是JE本身。</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>多线程支持，JE使用超时的方式来处理线程间的死琐问题。</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Database都采用简单的key/value对应的形式。</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>事务支持。</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>允许创建二级库。这样我们就可以方便的使用一级key,二级key来访问我们的数据。</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>支持RAM缓冲，这样就能减少频繁的IO操作。</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>支持日志。</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>数据备份和恢复。</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>游标支持。</div>
<div style="MARGIN-LEFT: 21pt; TEXT-INDENT: -21pt"><strong><span>二、<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong>获取JE</strong></div>
<div style="MARGIN-LEFT: 21pt">JE下载地址：</div>
<div style="MARGIN-LEFT: 21pt"><a href="http://www.oracle.com/technology/software/products/berkeley-db/je/index.html">http://www.oracle.com/technology/software/products/berkeley-db/je/index.html</a></div>
<div style="MARGIN-LEFT: 21pt">解开包后 把<em>JE_HOME</em><tt><span style="FONT-SIZE: 12pt">/lib/je-&lt;version&gt;.jar </span></tt><tt><span style="FONT-SIZE: 12pt">中的jar文件添加到你的环境变量中就可以使用je了。</span></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">相关帮助文档可以参考 </span></tt><em>JE_HOME</em><tt><span style="FONT-SIZE: 12pt">/docs/index.html</span></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">源代码见</span></tt><em>JE_HOME</em><tt><span style="FONT-SIZE: 12pt">/src/*.*</span></tt></div>
<div style="MARGIN-LEFT: 21pt; TEXT-INDENT: -21pt"><strong><span>三、<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong>JE</strong><strong>常见的异常</strong></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">DatabaseNotFoundException </span></tt><tt><span style="FONT-SIZE: 12pt">当没有找到指定的数据库的时候会返回这个异常</span></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">DeadlockException </span></tt><tt><span style="FONT-SIZE: 12pt">线程间死锁异常</span></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">RunRecoveryException </span></tt><tt><span style="FONT-SIZE: 12pt">回收异常，当发生此异常的时候，你必须得重新打开环境变量。</span></tt></div>
<div style="MARGIN-LEFT: 21pt; TEXT-INDENT: -21pt"><strong><span>四、<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong>关于日志文件必须了解的六项</strong></div>
<div style="MARGIN-LEFT: 21pt">JE的日志文件跟其他的数据库的日志文件不太一样，跟C版的DBD也是有区别的</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><tt><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt>JE的日志文件只能APPEND，第一个日志文件名是 <tt><span style="FONT-SIZE: 12pt">00000000.jdb</span></tt><tt><span style="FONT-SIZE: 12pt">，当他增长到一定大小的时候(默认是10M)，开始写第二个日志文件00000001.jdb，已此类推。</span></tt></div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>跟C版本有所不同，JE的数据日志和事务日志是放在一起的，而不是分开放的。</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>JE cleaner负责清扫没用到的磁盘空间，删除后，或者更新后新的记录会追加进来，而原有的记录空间就不在使用了，cleaner负责清理不用的空间。</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>清理并不是立即进行的，当你关闭你的数据库环境后，通过调用一个cleaner方法来清理。</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>清理也不是只动执行的，需要你自己手动调用cleaner 方法来定时清理的。</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>日志文件的删除仅发生在检查点之后。cleaner准备出哪些log 文件需要被删除，当检查点过后，删掉一些不在被使用的文件。每写20M的日志文件就执行一次检查点，默认下。</div>
<div style="MARGIN-LEFT: 21pt; TEXT-INDENT: -21pt"><strong><span>五、<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong>创建数据库环境</strong></div>
<div style="MARGIN-LEFT: 21pt; TEXT-INDENT: 21pt">JE要求在任何DATABASE操作前，要先打开数据库环境，就像我们要使用数据库的话必须得先建立连接一样。你可以通过数据库环境来创建和打开database，或者更改database名称和删除database.</div>
<div style="MARGIN-LEFT: 21pt; TEXT-INDENT: 21pt">可以通过Environments对象来打开环境，打开环境的时候设置的目录必须是已经存在的目录，否则会出错误。默认情况下，如果指定的database不存在则不会自动创建一个新的detabase,但可以通过设置setAllowCreate来改变这一情况。</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><strong><span>1.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong>打开database</strong><strong>环境</strong></div>
<div style="MARGIN-LEFT: 21pt; TEXT-INDENT: 21pt">示例：</div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Environment;</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.EnvironmentConfig;</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import java.io.File;</span></div>
<div style="MARGIN-LEFT: 73.5pt">&nbsp;</div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 73.5pt">&nbsp;</div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Environment myDbEnvironment = null;</span></div>
<div style="MARGIN-LEFT: 73.5pt">&nbsp;</div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; EnvironmentConfig envConfig = new EnvironmentConfig();</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; envConfig.setAllowCreate(true);//</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">如果不存在则创建一个</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDbEnvironment = new Environment(new File(&quot;/export/dbEnv&quot;), envConfig);</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (DatabaseException dbe) {</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">错误处理</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} </span></div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><strong><span>2.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong>关闭database</strong><strong>环境</strong></div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: 21pt">可以通过Environment.close()这个方法来关闭database环境，当你完成数据库操作后一定要关闭数据库环境。</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: 21pt">示例：</div>
<div style="MARGIN-LEFT: 94.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 94.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Environment;</span></div>
<div style="MARGIN-LEFT: 94.5pt">&nbsp;</div>
<div style="MARGIN-LEFT: 94.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 94.5pt">&nbsp;</div>
<div style="MARGIN-LEFT: 94.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 94.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; if (myDbEnvironment != null) {</span></div>
<div style="MARGIN-LEFT: 94.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myDbEnvironment.close();</span></div>
<div style="MARGIN-LEFT: 94.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; } </span></div>
<div style="MARGIN-LEFT: 94.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (DatabaseException dbe) {</span></div>
<div style="MARGIN-LEFT: 94.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></div>
<div style="MARGIN-LEFT: 94.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} </span></div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><strong><span>3.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong>清理日志</strong></div>
<div style="MARGIN-LEFT: 63pt">通常在关闭数据库连接的时候，有必要清理下日志，用以释放更多的磁盘空间。我们可以在Environment.close前执行下Environment.cleanLog()来达到此目的。</div>
<div style="MARGIN-LEFT: 63pt">示例：</div>
<div style="MARGIN-LEFT: 84pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 84pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Environment;</span></div>
<div style="MARGIN-LEFT: 84pt">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; if (myDbEnvironment != null) {</span></div>
<div style="MARGIN-LEFT: 84pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myDbEnvironment.cleanLog(); // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">在关闭环境前清理下日志</span></div>
<div style="MARGIN-LEFT: 84pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myDbEnvironment.close();</span></div>
<div style="MARGIN-LEFT: 84pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; } </span></div>
<div style="MARGIN-LEFT: 84pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (DatabaseException dbe) {</span></div>
<div style="MARGIN-LEFT: 84pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></div>
<div style="MARGIN-LEFT: 84pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} </span></div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><strong><span>4.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong>Database</strong><strong>环境的配置</strong></div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: 21pt">可以通过EnvironmentConfig这个对象来配置database环境。如果想得到当前环境的配置信息则可以通过Environment.getConfig()方法得到当前环境的配置信息。</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: 21pt">也可以使用EnvironmentMutableConfig来配置环境，其实 EnvironmentConfig是EnvironmentMutableConfig的子类，所以EnvironmentMutableConfig能够使用的设置，EnvironmentConfig也同样能够使用。</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: 21pt">如果你要获取当前环境的使用情况，那么你可以通过使用EnvironmentStats.getNCacheMiss().来监视RAM cache命中率。EnvironmentStats可以由<tt><span style="FONT-SIZE: 12pt">Environment.getStats()</span></tt><tt><span style="FONT-SIZE: 12pt">方法获取。</span></tt></div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: 21pt"><strong>EnvironmentConfig</strong><strong>常见方法介绍</strong></div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>EnvironmentConfig.setAllowCreate() ;</div>
<div style="MARGIN-LEFT: 105pt">如果设置了true则表示当数据库环境不存在时候重新创建一个数据库环境，默认为false.</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>EnvironmentConfig.setReadOnly()</div>
<div style="MARGIN-LEFT: 105pt">以只读方式打开，默认为false.</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>EnvironmentConfig.setTransactional()</div>
<div style="MARGIN-LEFT: 105pt">事务支持,如果为true，则表示当前环境支持事务处理，默认为false，不支持事务处理。</div>
<div><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>EnvironmentMutableConfig</strong></span><strong>的介绍</strong></div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>setCachePercent()</div>
<div style="MARGIN-LEFT: 105pt">设置当前环境能够使用的RAM占整个JVM内存的百分比。</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>setCacheSize()</div>
<div style="MARGIN-LEFT: 105pt">设置当前环境能够使用的最大RAM。单位BYTE</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>setTxnNoSync()</div>
<div style="MARGIN-LEFT: 105pt">当提交事务的时候是否把缓存中的内容同步到磁盘中去。</div>
<div style="MARGIN-LEFT: 105pt">true 表示不同步，也就是说不写磁盘</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>setTxnWriteNoSync()</div>
<div style="MARGIN-LEFT: 105pt">当提交事务的时候，是否把缓冲的log写到磁盘上</div>
<div style="MARGIN-LEFT: 105pt">true 表示不同步，也就是说不写磁盘</div>
<div><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>示例一：</div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Environment;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.EnvironmentConfig;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import java.io.File;</span></div>
<div style="MARGIN-LEFT: 105pt">&nbsp;</div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 105pt">&nbsp;</div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Environment myDatabaseEnvironment = null;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; EnvironmentConfig envConfig = new EnvironmentConfig();</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; //</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">当环境不存在的时候自动创建环境</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; envConfig.setAllowCreate(true);</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">设置支持事务</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; envConfig.setTransactional(true);</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDatabaseEnvironment = </span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new Environment(new File(&quot;/export/dbEnv&quot;), envConfig);</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (DatabaseException dbe) {</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; System.err.println(dbe.toString());</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; System.exit(1);</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></tt>示例二：</div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Environment;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.EnvironmentMutableConfig;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import java.io.File;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; Environment myEnv = new Environment(new File(&quot;/export/dbEnv&quot;), null);</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; EnvironmentMutableConfig envMutableConfig = </span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;new EnvironmentMutableConfig();</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; envMutableConfig.setTxnNoSync(true);</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myEnv.setMutableConfig(envMutableConfig); </span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (DatabaseException dbe) {</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} </span></div>
<div><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>示例三:</div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Environment;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">//</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">没有命中的</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">CACHE</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">long cacheMisses = myEnv.getStats(null).getNCacheMiss();</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">... </span></div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><span>5.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>Database</strong><strong>操作</strong></div>
<div style="MARGIN-LEFT: 63pt">在BDB中，数据是以key/value方式成队出现的。</div>
<div style="MARGIN-LEFT: 63pt"><strong>打开database</strong></div>
<div style="MARGIN-LEFT: 63pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>可以通过environment.openDatabase()方法打开一个database,在调用这个方法的时候必须指定database的名称。和databaseConfig() (注：数据库设置)</div>
<div style="MARGIN-LEFT: 63pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>示例：</div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseConfig;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Environment;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.EnvironmentConfig;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import java.io.File;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Environment myDbEnvironment = null;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Database myDatabase = null;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">打开一个环境，如果不存在则创建一个</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; EnvironmentConfig envConfig = new EnvironmentConfig();</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; envConfig.setAllowCreate(true);</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDbEnvironment = new Environment(new File(&quot;/export/dbEnv&quot;), envConfig);</span></div>
<div style="MARGIN-LEFT: 105pt">&nbsp;</div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">打开一个数据库，如果数据库不存在则创建一个</span></div>
<div style="MARGIN-LEFT: 105pt"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseConfig dbConfig = new DatabaseConfig();</span></strong></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; <strong>dbConfig.setAllowCreate(true);</strong></span></div>
<div style="MARGIN-LEFT: 105pt"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDatabase = myDbEnvironment.openDatabase(null, </span></strong></div>
<div style="MARGIN-LEFT: 105pt"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&quot;sampleDatabase&quot;, dbConfig);</span></strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial"> //</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">打开一个数据库，数据库名为</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //sampleDatabase,</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">数据库的配置为</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">dbConfig</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (DatabaseException dbe) {</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">错误处理</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 63pt"><strong>关闭database</strong></div>
<div style="MARGIN-LEFT: 63pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>通过调用Database.close()方法来关闭数据库，但要注意，在关闭数据库前必须得先把游标先关闭。</div>
<div style="MARGIN-LEFT: 63pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>使用示例：</div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Environment;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (myDatabase != null) {</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myDatabase.close();</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (myDbEnvironment != null) {</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myDbEnvironment.close();</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (DatabaseException dbe) {</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">错误处理</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 63pt"><strong>设置数据库属性</strong></div>
<div style="MARGIN-LEFT: 63pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>其实设置数据库属性跟设置环境属性差不多，JE中通过DatabaseConfig对象来设置数据库属性。你能够设置的数据库属性如下。</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>DatabaseConfig.setAllowCreate()</div>
<div style="MARGIN-LEFT: 105pt">如果是true的话，则当不存在此数据库的时候创建一个。</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>DatabaseConfig.setBtreeComparator()</div>
<div style="MARGIN-LEFT: 105pt">设置用于Btree比较的比较器，通常是用来排序</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>DatabaseConfig.setDuplicateComparator()</div>
<div style="MARGIN-LEFT: 105pt">设置用来比较一个key有两个不同值的时候的大小比较器。</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>DatabaseConfig.setSortedDuplicates()</div>
<div style="MARGIN-LEFT: 105pt">设置一个key是否允许存储多个值，true代表允许，默认false.</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>DatabaseConfig.setExclusiveCreate()</div>
<div style="MARGIN-LEFT: 105pt">以独占的方式打开，也就是说同一个时间只能有一实例打开这个database。</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>DatabaseConfig.setReadOnly()</div>
<div style="MARGIN-LEFT: 105pt">以只读方式打开database,默认是false.</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>DatabaseConfig.setTransactional()</div>
<div style="MARGIN-LEFT: 105pt">如果设置为true,则支持事务处理，默认是false，不支持事务。</div>
<div><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>使用示例：</div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseConfig;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">// Environment open omitted for brevity</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Database myDatabase = null;</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseConfig dbConfig = new DatabaseConfig();</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; dbConfig.setAllowCreate(true);</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; dbConfig.setSortedDuplicates(true);</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDatabase = </span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myDbEnv.openDatabase(null, </span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;sampleDatabase&quot;, </span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dbConfig); </span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (DatabaseException dbe) {</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here.</span></div>
<div style="MARGIN-LEFT: 105pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 63pt"><strong>一些用来管理的方法</strong></div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Database.getDatabaseName()</div>
<div style="MARGIN-LEFT: 105pt">取得数据库的名称</div>
<div style="MARGIN-LEFT: 105pt">如：String dbName = myDatabase.getDatabaseName();</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Database.getEnvironment()</div>
<div style="MARGIN-LEFT: 105pt">取得包含这个database的环境信息</div>
<div style="MARGIN-LEFT: 105pt">如：Environment theEnv = myDatabase.getEnvironment();</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Database.preload()</div>
<div style="MARGIN-LEFT: 105pt">预先加载指定bytes的数据到RAM中。</div>
<div style="MARGIN-LEFT: 105pt">如：myDatabase.preload(1048576l); // 1024*1024</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Environment.getDatabaseNames()</div>
<div style="MARGIN-LEFT: 105pt">返回当前环境下的数据库列表</div>
<div style="MARGIN-LEFT: 105pt">如：</div>
<div style="MARGIN-LEFT: 115.5pt">import java.util.List;</div>
<div style="MARGIN-LEFT: 115.5pt">List myDbNames = myDbEnv.getDatabaseNames();</div>
<div style="MARGIN-LEFT: 115.5pt">for(int i=0; i &lt; myDbNames.size(); i++) {</div>
<div style="MARGIN-LEFT: 115.5pt"><span>&nbsp;&nbsp;&nbsp; System.out.println(&quot;Database Name: &quot; + (String)myDbNames.get(i));</span></div>
<div style="MARGIN-LEFT: 115.5pt">}</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Environment.removeDatabase()</div>
<div style="MARGIN-LEFT: 105pt">删除当前环境中指定的数据库。</div>
<div style="MARGIN-LEFT: 105pt">如：</div>
<div style="MARGIN-LEFT: 115.5pt">String dbName = myDatabase.getDatabaseName();</div>
<div style="MARGIN-LEFT: 115.5pt">myDatabase.close();</div>
<div style="MARGIN-LEFT: 115.5pt">myDbEnv.removeDatabase(null, dbName);</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Environment.renameDatabase()</div>
<div style="MARGIN-LEFT: 105pt">给当前环境下的数据库改名</div>
<div style="MARGIN-LEFT: 105pt">如：</div>
<div style="MARGIN-LEFT: 115.5pt">String oldName = myDatabase.getDatabaseName();<span>&nbsp;&nbsp; </span></div>
<div style="MARGIN-LEFT: 115.5pt">String newName = new String(oldName + &quot;.new&quot;, &quot;UTF-8&quot;);</div>
<div style="MARGIN-LEFT: 115.5pt">myDatabase.close();</div>
<div style="MARGIN-LEFT: 115.5pt">myDbEnv.renameDatabase(null, oldName, newName);</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Environment.truncateDatabase()</div>
<div style="MARGIN-LEFT: 105pt">清空database内的所有数据，返回清空了多少条记录。</div>
<div style="MARGIN-LEFT: 105pt">如：</div>
<div style="MARGIN-LEFT: 115.5pt">Int numDiscarded= myEnv.truncate(null,</div>
<div style="MARGIN-LEFT: 115.5pt">myDatabase.getDatabaseName(),true); </div>
<div style="MARGIN-LEFT: 115.5pt">System.out.println(&quot;一共删除了 &quot; + numDiscarded +&quot; 条记录 从数据库 &quot; + myDatabase.getDatabaseName());</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><strong><span>6.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong>Database </strong><strong>记录</strong></div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: 21pt" align="left">JE的记录包含两部分,key键值和value数据值，这两个值都是通过DatabaseEntry对象封装起来，所以说如果要使用记录，则你必须创建两个DatabaseEntry对象，一个是用来做为key，另外一个是做为value.</div>
<div style="MARGIN-LEFT: 63pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: 27pt" align="left"><tt><span style="FONT-SIZE: 12pt">DatabaseEntry</span></tt><tt><span style="FONT-SIZE: 12pt">能够支持任何的能够转换为bytes数组形式的基本数据。包括所有的JAVA基本类型和可序列化的对象.</span></tt></div>
<div align="left"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></tt></div>
<div style="MARGIN-LEFT: 63pt" align="left"><strong><span style="FONT-SIZE: 12pt">使用记录</span></strong></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span style="FONT-SIZE: 12pt">&nbsp;</span><span style="FONT-SIZE: 12pt">示例一：把字符串转换DatabaseEntry</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String aKey = &quot;key&quot;; </span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String aData = &quot;data&quot;;</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;//</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">设置</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">key/value,</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">注意</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">DatabaseEntry</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">内使用的是</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">bytes</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">数组</span></div>
<div style="MARGIN-LEFT: 73.5pt"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;DatabaseEntry theKey=new DatabaseEntry(aKey.getBytes(&quot;UTF-8&quot;));</span></strong></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;<strong>DatabaseEntry theData=new DatabaseEntry(aData.getBytes(&quot;UTF-8&quot;));</strong></span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (Exception e) {</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">错误处理</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span style="FONT-SIZE: 12pt">&nbsp;</span><span style="FONT-SIZE: 12pt">示例二：把DatabaseEntry里的数据转换成字符串</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">byte[] myKey = <strong>theKey.getData();</strong></span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">byte[] myData =<strong> theData.getData();</strong></span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String key = new String(myKey, &quot;UTF-8&quot;);</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String data = new String(myData, &quot;UTF-8&quot;);</span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><strong><span style="FONT-SIZE: 12pt">读和写database 记录</span></strong></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span><span style="FONT-SIZE: 12pt">读和写database记录的时候大体是基本一样的，唯一有区别的是每个key写是否允许写多条记录，默认情况下是不支持多条记录的。</span></div>
<div style="MARGIN-LEFT: 84pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><strong><span style="FONT-SIZE: 12pt">a)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong><span style="FONT-SIZE: 12pt">你可以使用如下方法向database 里添加记录</span></strong></div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span style="FONT-SIZE: 12pt">l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="FONT-SIZE: 12pt">Database.put()</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span><span style="FONT-SIZE: 12pt">向database中添加一条记录。如果你的database不支持一个key对应多个data或当前database中已经存在该key了，则使用此方法将使用新的值覆盖旧的值。</span></div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span style="FONT-SIZE: 12pt">l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="FONT-SIZE: 12pt">Database.putNoOverwrite()</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span><span style="FONT-SIZE: 12pt">向database中添加新值但如果原先已经有了该key，则不覆盖。不管database是否允许支持多重记录(一个key对应多个value),只要存在该key就不允许添加，并且返回perationStatus.KEYEXIST信息。</span></div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span style="FONT-SIZE: 12pt">l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span style="FONT-SIZE: 12pt">Database.putNoDupData()</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span><span style="FONT-SIZE: 12pt">想database中添加一条记录，如果database中已经存在了相同的 key和value则返回 OperationStatus.KEYEXIST.</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="FONT-SIZE: 12pt">使用示例：</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></span></div>
<div style="MARGIN-LEFT: 73.5pt"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></span></div>
<div style="MARGIN-LEFT: 73.5pt"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></span></div>
<div style="MARGIN-LEFT: 73.5pt"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></span></div>
<div style="MARGIN-LEFT: 73.5pt"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String aKey = &quot;myFirstKey&quot;;</span></span></div>
<div style="MARGIN-LEFT: 73.5pt"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String aData = &quot;myFirstData&quot;;</span></span></div>
<div style="MARGIN-LEFT: 73.5pt"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></span></div>
<div style="MARGIN-LEFT: 73.5pt"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry theKey = new DatabaseEntry(aKey.getBytes(&quot;UTF-8&quot;));</span></span></div>
<div style="MARGIN-LEFT: 73.5pt"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry theData = new DatabaseEntry(aData.getBytes(&quot;UTF-8&quot;));</span></span></div>
<div style="MARGIN-LEFT: 73.5pt"><strong><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDatabase.put(null, theKey, theData);</span></span></strong></div>
<div style="MARGIN-LEFT: 73.5pt"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (Exception e) {</span></span></div>
<div style="MARGIN-LEFT: 73.5pt"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></span></div>
<div style="MARGIN-LEFT: 73.5pt"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></span></div>
<div style="MARGIN-LEFT: 84pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><strong><span style="FONT-SIZE: 12pt">b)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong><span style="FONT-SIZE: 12pt">你可以使用如下方法从database 里读取记录</span></strong></div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><strong><span>1.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong>Database.get()</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>基本的读记录的方法，通过key的方式来匹配，如果没有改记录则返回OperationStatus.NOTFOUND。</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Database.getSearchBoth()</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>通过key和value来同时匹配，同样如果没有记录匹配key和value则会返回<tt><span style="FONT-SIZE: 12pt">OperationStatus.NOTFOUND</span></tt><tt><span style="FONT-SIZE: 12pt">。</span></tt></div>
<div style="MARGIN-LEFT: 84pt" align="left">使用示例：</div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.LockMode;</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.OperationStatus;</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String aKey = &quot;myFirstKey&quot;;</span></div>
<div style="MARGIN-LEFT: 73.5pt">&nbsp;</div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry theKey = new DatabaseEntry(aKey.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry theData = new DatabaseEntry();</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; </span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; <strong>&nbsp;if (myDatabase.get(null, theKey, theData, LockMode.DEFAULT) ==</strong></span></div>
<div style="MARGIN-LEFT: 73.5pt"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OperationStatus.SUCCESS) {</span></strong></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; byte[] retData = theData.getData();</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String foundData = new String(retData, &quot;UTF-8&quot;);</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(&quot;For key: '&quot; + aKey + &quot;' found data: '&quot; + </span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foundData + &quot;'.&quot;);</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; } else {</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(&quot;No record found for key '&quot; + aKey + &quot;'.&quot;);</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; } </span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (Exception e) {</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></div>
<div style="MARGIN-LEFT: 73.5pt"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 84pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><strong><span style="FONT-SIZE: 12pt">c)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong><span style="FONT-SIZE: 12pt">删除记录</span></strong></div>
<div style="MARGIN-LEFT: 63pt" align="left"><strong><span style="FONT-SIZE: 12pt">&nbsp;&nbsp; </span></strong><span style="FONT-SIZE: 12pt">可以使用<tt>Database.delete()这个方法来删除记录。如果你的database支持多重记录，则当前key下的所有记录都会被删除，如果只想删除多重记录中的一条则可以使用游标来删除。</tt></span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">当然你也可以使用Environment.truncateDatabase()这个方法来清空database 中的所有记录。</span></tt></div>
<div style="MARGIN-LEFT: 63pt" align="left"><tt>&nbsp;</tt></div>
<div style="MARGIN-LEFT: 63pt" align="left"><tt><span style="FONT-SIZE: 12pt">使用示例：</span></tt></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; String aKey = &quot;myFirstKey&quot;;</span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry theKey = new DatabaseEntry(aKey.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDatabase.delete(null, theKey); </span></strong></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (Exception e) {</span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 84pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><strong><span style="FONT-SIZE: 12pt">d)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong><span style="FONT-SIZE: 12pt">提交事务</span></strong></div>
<div style="MARGIN-LEFT: 63pt" align="left"><strong><span style="FONT-SIZE: 12pt">&nbsp;&nbsp; </span></strong><span style="FONT-SIZE: 12pt">当你对database进行了写操作的时候，你的修改不一定马上就能生效，有的时候他仅仅是缓存在RAM中，如果想让你的修改立即生效，则可以使用<tt>Environment.sync()方法来把数据同步到磁盘中去。</tt></span></div>
<div style="MARGIN-LEFT: 84pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><strong><span style="FONT-SIZE: 12pt">e)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong><span style="FONT-SIZE: 12pt">不同类型的数据的处理</span></strong></div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><strong><span style="FONT-SIZE: 12pt">1.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><span style="FONT-SIZE: 12pt">你可以使用</span>DatabaseEntry来绑定基本的JAVA数据类型，主要有String、Character、Boolean、Byte、Short、Integer、Long、Float、Double.</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>使用示例一：</div>
<div style="MARGIN-LEFT: 63pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.bind.EntryBinding;</span></span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.bind.tuple.TupleBinding;</span></span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; String aKey = &quot;myLong&quot;;</span></span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry theKey = new</span></span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry(aKey.getBytes(&quot;UTF-8&quot;));&nbsp;&nbsp;&nbsp; </span></span></div>
<div style="MARGIN-LEFT: 63pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 63pt" align="left"><strong><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; Long myLong = new Long(123456789l);</span></span></strong></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; <strong>&nbsp;DatabaseEntry theData = new DatabaseEntry();</strong></span></span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; <strong>&nbsp;EntryBinding myBinding = </strong></span><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </strong></span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><strong><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; TupleBinding.getPrimitiveBinding(Long.class);</span></span></strong></div>
<div style="MARGIN-LEFT: 63pt" align="left"><strong><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myBinding.objectToEntry(myLong, theData);</span></span></strong></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDatabase.put(null, theKey, theData);</span></span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (Exception e) {</span></span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></span></div>
<div style="MARGIN-LEFT: 63pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>使用示例二：</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.bind.EntryBinding;</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.bind.tuple.TupleBinding;</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.LockMode;</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.OperationStatus;</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Database myDatabase = null;</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String aKey = &quot;myLong&quot;;</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DatabaseEntry theKey = new </span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DatabaseEntry(aKey.getBytes(&quot;UTF-8&quot;));</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>DatabaseEntry theData = new DatabaseEntry();</strong></span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>EntryBinding myBinding = &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </strong></span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TupleBinding.getPrimitiveBinding(Long.class);</span></span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OperationStatus retVal = myDatabase.get(null, theKey, theData, </span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LockMode.DEFAULT);</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String retKey = null;</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (retVal == OperationStatus.SUCCESS) {</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;Long theLong = (Long) myBinding.entryToObject(theData);</span></span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; retKey = new String(theKey.getData(), &quot;UTF-8&quot;);</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(&quot;For key: '&quot; + retKey + &quot;' found Long: '&quot; + </span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;theLong + &quot;'.&quot;);</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } else {</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(&quot;No record found for key '&quot; + retKey + &quot;'.&quot;);</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (Exception e) {</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></span></div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><strong><span>2.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong>可序列化的对象的绑定</strong></div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span>1.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>首先你需要创建一个可序列化对象</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span>2.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>打开或创建你的database，你需要两个，一个用来存储你的数据，另外一个用来存储类信息。</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span>3.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>实例化catalog类，这个时候你可以使用<tt><span style="FONT-SIZE: 12pt">com.sleepycat.bind.serial.StoredClassCatalog</span></tt>,来存储你的类信息。</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><tt><span>4.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt>通过<tt><span style="FONT-SIZE: 12pt">com.sleepycat.bind.serial.SerialBinding</span></tt><tt><span style="FONT-SIZE: 12pt">来绑定数据和类。</span></tt></div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span>5.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>绑定并存储数据。</div>
<div style="MARGIN-LEFT: 105pt" align="left">示例：</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>创建一个可序列化的对象</strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import java.io.Serializable;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">public class MyData implements Serializable {</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; private long longData;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; private double doubleData;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; private String description;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; MyData() {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; longData = 0;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; doubleData = 0.0;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; description = null;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public void setLong(long data) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; longData = data;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public void setDouble(double data) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; doubleData = data;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public void setDescription(String data) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; description = data;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public long getLong() {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return longData;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public double getDouble() {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return doubleData;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public String getDescription() {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return description;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>存储数据</strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.bind.EntryBinding;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.bind.serial.StoredClassCatalog;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.bind.serial.SerialBinding;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseConfig;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String aKey = &quot;myData&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">MyData data2Store = new MyData();</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">data2Store.setLong(123456789l);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">data2Store.setDouble(1234.9876543);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">data2Store.setDescription(&quot;A test instance of this class&quot;);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseConfig myDbConfig = new DatabaseConfig();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDbConfig.setAllowCreate(true);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDbConfig.setSortedDuplicates(true);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; Database myDatabase = myDbEnv.openDatabase(null, &quot;myDb&quot;, myDbConfig);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDbConfig.setSortedDuplicates(false);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>//</strong></span><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">打开用来存储类信息的库</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; Database myClassDb = myDbEnv.openDatabase(null, &quot;classDb&quot;, myDbConfig)</span></strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">; </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // 3</span></strong><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">）创建</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">catalog</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; StoredClassCatalog classCatalog = new StoredClassCatalog(myClassDb);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;<strong>&nbsp;&nbsp;// 4</strong></span><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">）绑定数据和类</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; EntryBinding dataBinding = new SerialBinding(classCatalog, </span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MyData.class);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry theKey = new DatabaseEntry(aKey.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;<strong>&nbsp;&nbsp;// </strong></span><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">向</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">DatabaseEntry</span></strong><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">里写数据</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry theData = new DatabaseEntry();</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; dataBinding.objectToEntry(data2Store, theData);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDatabase.put(null, theKey, theData);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (Exception e) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">错误处理</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>读数据</strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.bind.EntryBinding;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.bind.serial.StoredClassCatalog;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.bind.serial.SerialBinding;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseConfig;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.LockMode;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">// The key data.</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String aKey = &quot;myData&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseConfig myDbConfig = new DatabaseConfig();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDbConfig.setAllowCreate(false);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; Database myDatabase = myDbEnv.openDatabase(null, &quot;myDb&quot;, myDbConfig);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">用来存储类信息的库</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; <strong>Database myClassDb = myDbEnv.openDatabase(null, &quot;classDb&quot;, myDbConfig); </strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; <strong>&nbsp;// </strong></span><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">实例化</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">catalog</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; StoredClassCatalog classCatalog = new StoredClassCatalog(myClassDb);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; <strong>&nbsp;// </strong></span><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">创建绑定对象</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; EntryBinding dataBinding = new SerialBinding(classCatalog, </span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MyData.class);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry theKey = new DatabaseEntry(aKey.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry theData = new DatabaseEntry();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDatabase.get(null, theKey, theData, LockMode.DEFAULT);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Recreate the MyData object from the retrieved DatabaseEntry using</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span></strong><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">根据存储的类信息还原数据</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;<strong>MyData retrievedData=(MyData)dataBinding.entryToObject(theData);</strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (Exception e) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><strong><span>3.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong>自定义对象的绑定</strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>使用tuple binding 来绑定自定义数据的步骤</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span>①.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>实例化你要存储的对象</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span>②.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>通过<tt><span style="FONT-SIZE: 12pt">com.sleepycat.bind.tuple.TupleBinding</span></tt> class来创建一个tuple binding。</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span>③.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>创建一个database，跟序列化的对象不同，你只需要创建一个。</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span>④.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>通过继承第二步的类来创建一个entry binding 对象。</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span>⑤.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>存储和使用数据</div>
<div style="MARGIN-LEFT: 105pt" align="left">使用示例：</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>创建要存储的对象</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">public class MyData2 {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; private long longData;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; private Double doubleData;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; private String description;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public MyData2() {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;longData = 0;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; doubleData = new Double(0.0);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; description = &quot;&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public void setLong(long data) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; longData = data;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public void setDouble(Double data) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; doubleData = data;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public void setString(String data) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; description = data;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public long getLong() {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return longData;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public Double getDouble() {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return doubleData;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public String getString() {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return description;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>创建一个TupleBinding对象 </div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.bind.tuple.TupleBinding;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.bind.tuple.TupleInput;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.bind.tuple.TupleOutput;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">public class MyTupleBinding extends TupleBinding {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">把对象转换成</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">TupleOutput</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public void objectToEntry(Object object, TupleOutput to) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MyData2 myData = (MyData2)object;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>&nbsp;to.writeDouble(myData.getDouble().doubleValue());</strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; to.writeLong(myData.getLong());</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; to.writeString(myData.getString());</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; &nbsp;}</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; //</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">把</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">TupleInput</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">转换为对象</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public Object entryToObject(TupleInput ti) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>&nbsp;Double theDouble = new Double(ti.readDouble());</strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; long theLong = ti.readLong();</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String theString = ti.readString();</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MyData2 myData = new MyData2();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;myData.setDouble(theDouble);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myData.setLong(theLong);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myData.setString(theString);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return myData;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} </span></div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&nbsp;读和写数据</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.bind.tuple.TupleBinding;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">TupleBinding keyBinding = new MyTupleBinding();</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">MyData2 theKeyData = new MyData2();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">theKeyData.setLong(123456789l);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">theKeyData.setDouble(new Double(12345.6789));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">theKeyData.setString(&quot;My key data&quot;);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">DatabaseEntry myDate = new DatabaseEntry();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">把</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">theKeyData </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">存储到</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">DatabaseEntry</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">里</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; keyBinding.objectToEntry(theKeyData, </span></strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">myDate<strong>);</strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; ...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Database </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">进行了一些读和写操作</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; ...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Retrieve the key data</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; theKeyData = (MyData2) keyBinding.entryToObject(</span></strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">myDate<strong>);</strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (Exception e) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">错误处理</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 84pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><strong><span style="FONT-SIZE: 12pt">f)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong><span style="FONT-SIZE: 12pt">&nbsp;</span></strong><strong><span style="FONT-SIZE: 12pt">使用比较器</span></strong></div>
<div style="MARGIN-LEFT: 63pt" align="left"><strong><span style="FONT-SIZE: 12pt">&nbsp;&nbsp; </span></strong><span style="FONT-SIZE: 12pt">JE</span><span style="FONT-SIZE: 12pt">是使用</span>BTrees来组织结构的，这意味着当对database的读和写需要涉及BTrees间的节点比较。这些比较在key间是经常的发生的。如果你的database支持多重记录，那么也会存在data间的比较。</div>
<div style="MARGIN-LEFT: 63pt" align="left"><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span><span style="FONT-SIZE: 12pt">默认的情况JE的比较器是按照字节的方式来进行比较的，这通常情况下能处理大多数的情况。但有的时候确实需要自定义比较器用于特殊的通途，比如说按照key来排序。</span></div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span style="FONT-SIZE: 12pt">l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong><span style="FONT-SIZE: 12pt">创建自己的比较器</span></strong></div>
<div style="MARGIN-LEFT: 105pt" align="left"><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span><span style="FONT-SIZE: 12pt">其实很简单，只要你重写<tt>Comparator</tt></span> class中的比较方法（<tt><span style="FONT-SIZE: 12pt">compare</span></tt>）就可以了，通过<tt><span style="FONT-SIZE: 12pt">Comparator.compare()</span></tt><tt><span style="FONT-SIZE: 12pt">会传递给你两个byte 数组形式的值，如果你知道结构，则可以根据你自己定义的方法来进行比较</span></tt></div>
<div style="MARGIN-LEFT: 105pt" align="left"><tt>&nbsp;</tt></div>
<div style="MARGIN-LEFT: 105pt" align="left"><tt><span style="FONT-SIZE: 12pt">示例：</span></tt></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import java.util.Comparator;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">public class MyDataComparator<strong> implements Comparator {</strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public MyDataComparator() {}</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public int <strong>compare</strong>(Object d1, Object d2) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;byte[] b1 = (byte[])d1;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; byte[] b2 = (byte[])d2;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String s1 = new String(b1, &quot;UTF-8&quot;);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String s2 = new String(b2, &quot;UTF-8&quot;);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>return</strong> s1.compareTo(s2);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} </span></div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><span style="FONT-SIZE: 12pt">l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong><span style="FONT-SIZE: 12pt">让database使用你自定义的比较器</span></strong></div>
<div style="MARGIN-LEFT: 126pt" align="left"><strong><span style="FONT-SIZE: 12pt">&nbsp;&nbsp; </span></strong><tt>如果你想改变<span>database中基本的排序方式，你只能重新创建database并重新导入数据。</span></tt></div>
<div style="MARGIN-LEFT: 147pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><tt><span>①.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp; </span></span></tt><tt>DatabaseConfig.setBtreeComparator()</tt></div>
<div style="MARGIN-LEFT: 126pt" align="left"><tt><span>&nbsp;&nbsp;&nbsp; </span></tt><tt>用于在<span>database里两个key的比较</span></tt></div>
<div style="MARGIN-LEFT: 147pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><tt><span>②.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp; </span></span></tt><tt>DatabaseConfig.setOverrideBtreeComparator()</tt></div>
<div style="MARGIN-LEFT: 126pt" align="left"><tt><span>&nbsp;&nbsp;&nbsp; </span></tt><tt>如果为<span>true则代表让database使用<span> DatabaseConfig.setBtreeComparator()</span>设置的比较器来代替默认的比较器。</span></tt></div>
<div style="MARGIN-LEFT: 147pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><tt><span>③.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp; </span></span></tt><tt>DatabaseConfig.setDuplicateComparator()</tt></div>
<div style="MARGIN-LEFT: 126pt" align="left"><tt><span>&nbsp;&nbsp;&nbsp; </span></tt><tt>用于<span>database可以使用多重记录的时候的data的<span>&nbsp;&nbsp;&nbsp; </span>比较。</span></tt></div>
<div style="MARGIN-LEFT: 147pt; TEXT-INDENT: -21pt; TEXT-ALIGN: left" align="left"><tt><span>④.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp; </span></span></tt><tt>DatabaseConfig.setOverrideDuplicateComparator()</tt></div>
<div style="MARGIN-LEFT: 126pt" align="left"><tt><span>&nbsp;&nbsp;&nbsp; </span></tt><tt>如果为<span>true则代表让database使用<span> DatabaseConfig. setDuplicateComparator()</span>设置<span>&nbsp;&nbsp;&nbsp; </span>的比<span>&nbsp;&nbsp;&nbsp; </span>较器来代替默认的比较器。</span></tt></div>
<div style="MARGIN-LEFT: 126pt" align="left"><tt><span style="FONT-SIZE: 12pt">使用示例：</span></tt></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseConfig;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import java.util.Comparator;&nbsp;&nbsp;&nbsp; </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseConfig myDbConfig = new DatabaseConfig();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDbConfig.setAllowCreate(true);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; <strong>// </strong></span><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">设置要使用的比较器</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDbConfig.setDuplicateComparator(MyDataComparator.class);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span></strong><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">使用自己定义的比较器</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDbConfig.setSortedDuplicates(true);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; Database myDatabase = myDbEnv.openDatabase(null, &quot;myDb&quot;, myDbConfig); </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (DatabaseException dbe) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 21pt; TEXT-INDENT: -21pt"><strong><span>六、<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong>游标的使用</strong></div>
<div><strong><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong>游标提供了遍历你database中记录的一种机制，使用游标你可以获取，添加，和删除你的记录。如果你的database支持多重记录，则可以通过游标访问同一个key下的每一个记录。</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>打开和关闭游标</strong></div>
<div style="MARGIN-LEFT: 21pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>要想使用游标则你必须通过Database.openCursor()方法来打开一个游标，你可以通过CursorConfig来配置你的游标。</div>
<div style="MARGIN-LEFT: 21pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>可以通过Cursor.close()方法来关闭游标。请注意在关闭database和环境前一定要关闭游标，否则会带来错误。</div>
<div style="MARGIN-LEFT: 21pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>打开游标示例：</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Cursor;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.CursorConfig;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Environment;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import java.io.File;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Environment myDbEnvironment = null;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Database myDatabase = null;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Cursor myCursor = null;</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDbEnvironment = new Environment(new File(&quot;/export/dbEnv&quot;), null);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDatabase = myDbEnvironment.openDatabase(null, &quot;myDB&quot;, null);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myCursor = myDatabase.openCursor(null, null);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (DatabaseException dbe) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here ...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 21pt">关闭游标示例：</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Cursor;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Environment;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; ...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch ... {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} finally {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (myCursor != null) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myCursor.close();</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (myDatabase != null) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myDatabase.close();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (myDbEnvironment != null) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myDbEnvironment.close();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; } catch(DatabaseException dbe) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.err.println(&quot;Error in close: &quot; + dbe.toString());</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} </span></div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>通过游标来获取记录</strong></div>
<div style="MARGIN-LEFT: 21pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>可以通过游标的Cursor.getNext()方法来遍历记录，Cursor.getNext()表示游标指针向下移动一条记录。同样的Cursor.getPrev()表示游标指针向上移动一条记录。</div>
<div style="MARGIN-LEFT: 21pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>使用示例一：</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Cursor;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.LockMode;&nbsp;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.OperationStatus; </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Cursor cursor = null;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; cursor = myDatabase.openCursor(null, null);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry foundKey = new DatabaseEntry();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry foundData = new DatabaseEntry();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">通过</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">cursor.getNex</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">方法来遍历记录</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;while (<strong>cursor.getNext(foundKey, foundData, LockMode.DEFAULT) ==</strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OperationStatus.SUCCESS</span></strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong><em>String keyString = new String(foundKey.getData(), &quot;UTF-8&quot;);</em></strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><em><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String dataString = new String(foundData.getData(), &quot;UTF-8&quot;);</span></em></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(&quot;Key | Data : &quot; + keyString + &quot; | &quot; + </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dataString + &quot;&quot;);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (DatabaseException de) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; System.err.println(&quot;Error accessing database.&quot; + de);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} finally {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">使用后必须关闭游标</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; cursor.close();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 21pt">使用示例二：</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Cursor;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.LockMode;&nbsp;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.OperationStatus; </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Cursor cursor = null;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; ...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Open the cursor. </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; cursor = myDatabase.openCursor(null, null);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry foundKey = new DatabaseEntry();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry foundData = new DatabaseEntry();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">使用</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">cursor.getPrev</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">方法来遍历游标获取数据</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;<strong>&nbsp;&nbsp; while (cursor.getPrev(foundKey, foundData, LockMode.DEFAULT) </strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; == OperationStatus.SUCCESS) {</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String theKey = new String(foundKey.getData(), &quot;UTF-8&quot;);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String theData = new String(foundData.getData(), &quot;UTF-8&quot;);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(&quot;Key | Data : &quot; +&nbsp;theKey + &quot; | &quot; + theData + &quot;&quot;);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (DatabaseException de) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; System.err.println(&quot;Error accessing database.&quot; + de);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} finally {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">使用后必须关闭游标</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; cursor.close();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>搜索数据</strong></div>
<div style="MARGIN-LEFT: 21pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>你可以通过游标方式搜索你的database记录，你也可以通过一个key来搜索你的记录，同样的你也可以通过key和value组合在一起来搜索记录。如果查询失败，则游标会返回OperationStatus.NOTFOUND。</div>
<div style="MARGIN-LEFT: 21pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>游标支持都检索方法如下：</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><tt><span>1)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt><tt><span style="FONT-SIZE: 12pt">Cursor.getSearchKey()</span></tt></div>
<div style="MARGIN-LEFT: 42pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>通过key的方式检索，使用后游标指针将移动到跟当前key匹配的第一项。</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><tt><span style="FONT-SIZE: 12pt">2)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt><tt><span style="FONT-SIZE: 12pt">Cursor.getSearchKeyRange()</span></tt></div>
<div style="MARGIN-LEFT: 42pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt>把游标移动到大于或等于查询的key的第一个匹配key,大小比较是通过你设置的比较器来完成的，如果没有设置则使用默认的比较器。</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><tt><span style="FONT-SIZE: 12pt">3)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt><tt><span style="FONT-SIZE: 12pt">Cursor.getSearchBoth()</span></tt></div>
<div style="MARGIN-LEFT: 42pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt>通过key和value方式检索，然后把游标指针移动到与查询匹配的第一项。</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><tt><span style="FONT-SIZE: 12pt">4)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt><tt><span style="FONT-SIZE: 12pt">Cursor.getSearchBothRange()</span></tt></div>
<div style="MARGIN-LEFT: 42pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt>把游标移动到所有的匹配key和大于或等于指定的data的第一项。</div>
<div style="MARGIN-LEFT: 42pt">&nbsp;比如说database存在如下的key/value记录，,大小比较是通过你设置的比较器来完成的，如果没有设置则使用默认的比较器。</div>
<div style="MARGIN-LEFT: 42pt">假设你的database存在如下的记录。</div>
<pre><tt><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></tt><span style="FONT-SIZE: 9pt; BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Alabama/Athens</span></pre>
<pre><tt><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></tt><span style="FONT-SIZE: 9pt; BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Alabama/Florence</span></pre>
<pre><tt><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></tt><span style="FONT-SIZE: 9pt; BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Alaska/Anchorage</span></pre>
<pre><tt><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></tt><span style="FONT-SIZE: 9pt; BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Alaska/Fairbanks</span></pre>
<pre><tt><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></tt><span style="FONT-SIZE: 9pt; BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Arizona/Avondale</span></pre>
<pre><tt><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></tt><span style="FONT-SIZE: 9pt; BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Arizona/Florence</span></pre>
<div style="MARGIN-LEFT: 42pt"><tt><span style="FONT-SIZE: 12pt">然后查询</span></tt></div>
<p>
<table style="BORDER-RIGHT: medium none; BORDER-TOP: medium none; MARGIN-LEFT: 68.4pt; BORDER-LEFT: medium none; BORDER-BOTTOM: medium none; BORDER-COLLAPSE: collapse" cellspacing="0" cellpadding="0" border="1">
    <tbody>
        <tr>
            <td style="BORDER-RIGHT: windowtext 1pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: windowtext 1pt solid; PADDING-LEFT: 5.4pt; PADDING-BOTTOM: 0cm; BORDER-LEFT: windowtext 1pt solid; WIDTH: 73.6pt; PADDING-TOP: 0cm; BORDER-BOTTOM: windowtext 1pt solid" valign="top" width="98">
            <div align="left"><tt><span style="FONT-SIZE: 12pt">查询的key</span></tt></div>
            </td>
            <td style="BORDER-RIGHT: 1pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: 1pt solid; PADDING-LEFT: 5.4pt; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; WIDTH: 79.4pt; PADDING-TOP: 0cm; BORDER-BOTTOM: 1pt solid" valign="top" width="106">
            <div align="left"><tt><span style="FONT-SIZE: 12pt">查询的data</span></tt></div>
            </td>
            <td style="BORDER-RIGHT: 1pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: 1pt solid; PADDING-LEFT: 5.4pt; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; WIDTH: 117pt; PADDING-TOP: 0cm; BORDER-BOTTOM: 1pt solid" valign="top" width="156">
            <div align="left"><tt><span style="FONT-SIZE: 12pt">游标指向</span></tt></div>
            </td>
        </tr>
        <tr>
            <td style="BORDER-RIGHT: 1pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: medium none; PADDING-LEFT: 5.4pt; PADDING-BOTTOM: 0cm; BORDER-LEFT: 1pt solid; WIDTH: 73.6pt; PADDING-TOP: 0cm; BORDER-BOTTOM: 1pt solid" valign="top" width="98">
            <div>Alaska</div>
            </td>
            <td style="BORDER-RIGHT: 1pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: medium none; PADDING-LEFT: 5.4pt; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; WIDTH: 79.4pt; PADDING-TOP: 0cm; BORDER-BOTTOM: 1pt solid" valign="top" width="106">
            <div>Fa</div>
            </td>
            <td style="BORDER-RIGHT: 1pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: medium none; PADDING-LEFT: 5.4pt; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; WIDTH: 117pt; PADDING-TOP: 0cm; BORDER-BOTTOM: 1pt solid" valign="top" width="156">
            <div>Alaska/Fairbanks</div>
            </td>
        </tr>
        <tr>
            <td style="BORDER-RIGHT: 1pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: medium none; PADDING-LEFT: 5.4pt; PADDING-BOTTOM: 0cm; BORDER-LEFT: 1pt solid; WIDTH: 73.6pt; PADDING-TOP: 0cm; BORDER-BOTTOM: 1pt solid" valign="top" width="98">
            <div>Arizona</div>
            </td>
            <td style="BORDER-RIGHT: 1pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: medium none; PADDING-LEFT: 5.4pt; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; WIDTH: 79.4pt; PADDING-TOP: 0cm; BORDER-BOTTOM: 1pt solid" valign="top" width="106">
            <div>Fl</div>
            </td>
            <td style="BORDER-RIGHT: 1pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: medium none; PADDING-LEFT: 5.4pt; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; WIDTH: 117pt; PADDING-TOP: 0cm; BORDER-BOTTOM: 1pt solid" valign="top" width="156">
            <div>Arizona/Florence</div>
            </td>
        </tr>
        <tr>
            <td style="BORDER-RIGHT: 1pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: medium none; PADDING-LEFT: 5.4pt; PADDING-BOTTOM: 0cm; BORDER-LEFT: 1pt solid; WIDTH: 73.6pt; PADDING-TOP: 0cm; BORDER-BOTTOM: 1pt solid" valign="top" width="98">
            <div>Alaska</div>
            </td>
            <td style="BORDER-RIGHT: 1pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: medium none; PADDING-LEFT: 5.4pt; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; WIDTH: 79.4pt; PADDING-TOP: 0cm; BORDER-BOTTOM: 1pt solid" valign="top" width="106">
            <div>An</div>
            </td>
            <td style="BORDER-RIGHT: 1pt solid; PADDING-RIGHT: 5.4pt; BORDER-TOP: medium none; PADDING-LEFT: 5.4pt; PADDING-BOTTOM: 0cm; BORDER-LEFT: medium none; WIDTH: 117pt; PADDING-TOP: 0cm; BORDER-BOTTOM: 1pt solid" valign="top" width="156">
            <div>Alaska/Anchorage</div>
            </td>
        </tr>
    </tbody>
</table>
</p>
<div style="MARGIN-LEFT: 42pt"><tt><span style="FONT-SIZE: 12pt">使用示例：</span></tt></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Cursor;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.LockMode;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.OperationStatus; </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String searchKey = &quot;Alaska&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String searchData = &quot;Fa&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Cursor cursor = null;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; ...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; cursor = myDatabase.openCursor(null, null);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry theKey = </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new DatabaseEntry(searchKey.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry theData = </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new DatabaseEntry(searchData.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; cursor = myDatabase.openCursor(null, null);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; <strong>OperationStatus retVal = cursor.getSearchBothRange(theKey,</strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;theData, LockMode.DEFAULT);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; if (retVal == OperationStatus.NOTFOUND) {</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(searchKey + &quot;/&quot; + searchData + </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot; not matched in database &quot; + </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myDatabase.getDatabaseName());</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; } else {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String foundKey = new String(theKey.getData(), &quot;UTF-8&quot;);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String foundData = new String(theData.getData(), &quot;UTF-8&quot;);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(&quot;Found record &quot; + foundKey + &quot;/&quot; + foundData + </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;for search key/data: &quot; + searchKey + </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;/&quot; + searchData);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (Exception e) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} finally {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; cursor.close();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>使用游标来定位多重记录</strong></div>
<div style="MARGIN-LEFT: 21pt"><strong><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong>如果你的库支持多重记录，你可以使用游标来遍历一个key下的多个data.</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><tt><span style="FONT-SIZE: 12pt">1)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt><tt><span style="FONT-SIZE: 12pt">Cursor.getNext(), Cursor.getPrev()</span></tt></div>
<div style="MARGIN-LEFT: 42pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>获取上一条记录或下一条记录</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><tt><span style="FONT-SIZE: 12pt">2)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt><tt><span style="FONT-SIZE: 12pt">Cursor.getSearchBothRange()</span></tt></div>
<div style="MARGIN-LEFT: 42pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">用语定位到满足指定data的第一条记录。</span></tt></div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><tt><span style="FONT-SIZE: 12pt">3)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt><tt><span style="FONT-SIZE: 12pt">Cursor.getNextNoDup(), Cursor.getPrevNoDup() </span></tt></div>
<div style="MARGIN-LEFT: 42pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">跳到上一个key的最后一个data或下一个key的第一个data,忽略<span>&nbsp;&nbsp;&nbsp;&nbsp; </span>当前key多重记录的存在。</span></tt></div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><tt><span style="FONT-SIZE: 12pt">4)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt><tt><span style="FONT-SIZE: 12pt">Cursor.getNextDup(), Cursor.getPrevDup() </span></tt></div>
<div style="MARGIN-LEFT: 42pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">在当前key中把指针移动到前一个data或后一个data.</span></tt></div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><tt><span style="FONT-SIZE: 12pt">5)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt><tt><span style="FONT-SIZE: 12pt">Cursor.count()</span></tt></div>
<div style="MARGIN-LEFT: 42pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">获取当前key下的data总数。</span></tt></div>
<div style="MARGIN-LEFT: 42pt"><tt><span style="FONT-SIZE: 12pt">使用示例：</span></tt></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Cursor;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.LockMode;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.OperationStatus; </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Cursor cursor = null;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; ...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Create DatabaseEntry objects</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // searchKey is some String.</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry theKey = new DatabaseEntry(searchKey.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry theData = new DatabaseEntry();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; cursor = myDatabase.openCursor(null, null);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; <strong>OperationStatus retVal = cursor.getSearchKey(theKey, </strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">theData, LockMode.DEFAULT);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">如果</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">count</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">超过一个，则遍历</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; if (cursor.count() &gt; 1) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while (retVal == OperationStatus.SUCCESS) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String keyString = new String(theKey.getData(), &quot;UTF-8&quot;);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String dataString = new String(theData.getData(), &quot;UTF-8&quot;);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(&quot;Key | Data : &quot; +&nbsp;keyString + &quot; | &quot; + </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dataString + &quot;&quot;);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; retVal = cursor.getNextDup(theKey, theData, LockMode.DEFAULT);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (Exception e) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} finally {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; // Make sure to close the cursor</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; cursor.close();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>通过游标来添加数据</strong></div>
<div style="MARGIN-LEFT: 21pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>你可以通过游标来向database里添加数据</div>
<div style="MARGIN-LEFT: 21pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>你可以使用如下方法来向database里添加数据</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><tt><span>1)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt><tt><span style="FONT-SIZE: 12pt">Cursor.put()</span></tt></div>
<div style="MARGIN-LEFT: 42pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt>如果database不存在key,则添加，如果database存在key但允许多重记录，则可以通过比较器在适当的位置插入数据，如果key已存在且不支持多重记录，则替换原有的数据。</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><tt><span style="FONT-SIZE: 12pt">2)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt><tt><span style="FONT-SIZE: 12pt">Cursor.putNoDupData()</span></tt></div>
<div style="MARGIN-LEFT: 42pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">如果存在相同的key和data则返回OperationStatus.KEYEXIST</span></tt>.</div>
<div style="MARGIN-LEFT: 42pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>如果不存在key则添加数据。</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><tt><span style="FONT-SIZE: 12pt">3)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt><tt><span style="FONT-SIZE: 12pt">Cursor.putNoOverwrite()</span></tt></div>
<div style="MARGIN-LEFT: 42pt" align="left"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">如果存在相同的key在database里则返OperationStatus.KEYEXIS，</span></tt></div>
<div style="MARGIN-LEFT: 42pt" align="left"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">如果不存在key则添加数据。</span></tt></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Cursor;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.OperationStatus; </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String key1str = &quot;My first string&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String data1str = &quot;My first data&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String key2str = &quot;My second string&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String data2str = &quot;My second data&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String data3str = &quot;My third data&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Cursor cursor = null;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; ...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry key1 = new DatabaseEntry(key1str.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry data1 = new DatabaseEntry(data1str.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry key2 = new DatabaseEntry(key2str.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry data2 = new DatabaseEntry(data2str.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; &nbsp;DatabaseEntry data3 = new DatabaseEntry(data3str.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; cursor = myDatabase.openCursor(null, null);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; <strong>OperationStatus retVal = cursor.put(key1, data1); // </strong></span><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">添加成功</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; retVal = cursor.put(key2, data2); // </span></strong><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">添加成功</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; retVal = cursor.put(key2, data3); // </span></strong><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">如果允许多重记录则添加成功</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //</span></strong><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">否则添加失败</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (Exception e) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} finally {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; // Make sure to close the cursor</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; cursor.close();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>使用游标来删除记录</strong></div>
<div style="MARGIN-LEFT: 21pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>你可以通过调用<tt><span style="FONT-SIZE: 12pt">Cursor.delete()</span></tt>.方法来删除当前游标所指向的记录。删除后如果没有移动过指针这个时候调用<tt><span style="FONT-SIZE: 12pt">Cursor.getCurrent()</span></tt><tt><span style="FONT-SIZE: 12pt">还是可以得到当前值的，但移动以后就不可以了。如果没有重设指针，对同一个位置多次调用删除方法，会返回OperationStatus.KEYEMPTY状态。</span></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">使用示例：</span></tt></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Cursor;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.LockMode;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.OperationStatus; </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Cursor cursor = null;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; ...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry theKey = new DatabaseEntry(searchKey.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry theData = new DatabaseEntry();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; cursor = myDatabase.openCursor(null, null);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; OperationStatus retVal = cursor.getSearchKey(theKey, theData,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LockMode.DEFAULT);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; //</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">如果</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">date</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">不是多重记录</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">.</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; if (cursor.count() == 1) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; System.out.println(&quot;Deleting &quot; + </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new String(theKey.getData(), &quot;UTF-8&quot;) +</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &quot;|&quot; + </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new String(theData.getData(), &quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cursor.delete();//</span></strong><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">删除当前记录</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (Exception e) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} finally {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; // Make sure to close the cursor</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; cursor.close();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>修改当前游标所在位置的值</strong></div>
<div style="MARGIN-LEFT: 21pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>可以通过<tt><span style="FONT-SIZE: 12pt">Cursor.putCurrent()</span></tt><tt><span style="FONT-SIZE: 12pt">方法来修改，这个方法只有一个参数就是将要修改的值。这个方法不能用在多重记录。</span></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">使用示例：</span></tt></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Cursor;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.LockMode;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.OperationStatus; </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Cursor cursor = null;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; ...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry theKey = new DatabaseEntry(searchKey.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry theData = new DatabaseEntry();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; cursor = myDatabase.openCursor(null, null);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; OperationStatus retVal = cursor.getSearchKey(theKey, theData, </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">LockMode.DEFAULT);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; //</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">将要被替换的值</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; String replaceStr = &quot;My replacement string&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry replacementData = </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new DatabaseEntry(replaceStr.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; cursor.putCurrent(replacementData);//</span></strong><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">把当前位置用新值替换</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (Exception e) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} finally {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; // Make sure to close the cursor</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; cursor.close();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 21pt; TEXT-INDENT: -21pt"><strong><span>七、<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong>二级database</strong></div>
<div><strong><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong>在JE中包含你需要的(主要)数据的database被叫做primary database.而通过某种关系关联起来的叫secondary database.通常secondary database和primary database的key是一样的，只不过是为了对应多条不同类型的数据。</div>
<div><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>你可以通过SecondaryDatabase来创建二级库，而通过使用继承了SecondaryKeyCreator的 SecondaryConfig 来配置二级库。</div>
<div><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>通常primary database和secondary database间是存在某种关联的，所以如果对其中一个做了一些变动，另外一个可能也需要跟着做相应的变动。</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>打开和关闭二级库</strong></div>
<div style="MARGIN-LEFT: 21pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>你可以通过<tt><span style="FONT-SIZE: 12pt">Environment.openSecondaryDatabase()</span></tt><tt><span style="FONT-SIZE: 12pt">这个方法来打开一个二级库，在打开前你必须指定二级库的名称和配置信息。</span></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">需要与primary database和secondary database间绑定的就是索引。二级库通常能够提供额外的信息。</span></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">如果想要使用二级库，primary database不能支持多重记录,他的key必须得保证唯一。不然你没办法进行关联。</span></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt>&nbsp;</tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">所以说如果你要想打开和创建一个二级库需要如下步骤</span></tt></div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><span>①.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>打开你的primary database.</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><span>②.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>创建key creater实例。</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><tt><span>③.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt>设置你的二级库的配置文件，也就是创建<tt><span style="FONT-SIZE: 12pt">SecondaryConfig</span></tt></div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><tt><span>④.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt><tt><span style="FONT-SIZE: 12pt">这个时候你就可以打开你的二级库了。</span></tt></div>
<div style="MARGIN-LEFT: 42pt"><tt><span style="FONT-SIZE: 12pt">使用示例如下：</span></tt></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.bind.tuple.TupleBinding;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseConfig;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Environment;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.SecondaryDatabase;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.SecondaryConfig;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import java.io.File;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">DatabaseConfig myDbConfig = new DatabaseConfig();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">//</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">二级库的配置信息</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">SecondaryConfig mySecConfig = new SecondaryConfig();</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">myDbConfig.setAllowCreate(true);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">mySecConfig.setAllowCreate(true);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">// </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">通常二级库经常是允许多重记录的</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">mySecConfig.setSortedDuplicates(true);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">// primary database</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Environment myEnv = null;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Database myDb = null;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">SecondaryDatabase mySecDb = null;</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; //</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">打开</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">primary</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">库</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String dbName = &quot;myPrimaryDatabase&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myEnv = new Environment(new File(&quot;/tmp/JEENV&quot;), null);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; myDb = myEnv.openDatabase(null, dbName, myDbConfig);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; //</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">创建</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">tuple binding</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; TupleBinding myTupleBinding = new MyTupleBinding();</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">创建二级库的</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">key</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">创建器</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; <strong>FullNameKeyCreator keyCreator = new &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FullNameKeyCreator(myTupleBinding);</strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">设置二级库的创建器</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; mySecConfig.setKeyCreator(keyCreator);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; //</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">打开二级库</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; String secDbName = &quot;mySecondaryDatabase&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; <strong>mySecDb = myEnv.openSecondaryDatabase(null, secDbName, </strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myDb, mySecConfig); </span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (DatabaseException de) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">错误处理</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 42pt">可以调用二级库的close()方法来关闭一个二级库，在关闭 primary database前你必须先关闭一个二级库。</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; if (mySecDb != null) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mySecDb.close();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; if (myDb != null) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myDb.close(); </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; if (myEnv != null) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myEnv.close();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (DatabaseException dbe) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>二级库的键创建器</strong></div>
<div style="MARGIN-LEFT: 21pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>在使用二级库的时候，你必须提供二级库的键创建器来为二级库创建二级。在程序中你可以使用<tt><span style="FONT-SIZE: 12pt">SecondaryConfig.setKeyCreator()</span></tt><tt><span style="FONT-SIZE: 12pt">来指定一个键创建器。你可以使用任何的数据创建二级库的键，只要对你来说是需要的。</span></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">自定义键创建器需要继承SecondaryKeyCreator类，并且要重写其中的createSecondaryKey方法。createSecondaryKey返回一个boolean形式的值，如果返回false,则表示二级库不存在这个key.</span></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><strong><span style="FONT-SIZE: 12pt">&nbsp;&nbsp; </span></strong></tt><tt><strong><span style="FONT-SIZE: 12pt">示例：</span></strong></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">假设你的primary database使用如下的结构来存储data.</span></tt></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">public class PersonData {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; private String userID;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; private String surname;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; private String familiarName;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public PersonData(String userID, String surname, String familiarName) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.userID = userID;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.surname = surname;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.familiarName = familiarName;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public String getUserID() {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return userID;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public String getSurname() {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return surname;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public String getFamiliarName() {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return familiarName;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} </span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;</span></tt><tt><span style="FONT-SIZE: 12pt">你可以使用如下的方法来创建键创建器</span></tt></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">、</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.bind.tuple.TupleBinding;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.SecondaryKeyCreator;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.SecondaryDatabase;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import java.io.IOException;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">public class FullNameKeyCreator implements SecondaryKeyCreator {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; private TupleBinding theBinding;</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public FullNameKeyCreator(TupleBinding theBinding1) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; theBinding = theBinding1;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; public boolean createSecondaryKey(SecondaryDatabase secDb,</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DatabaseEntry keyEntry, </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DatabaseEntry dataEntry,</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DatabaseEntry resultEntry) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PersonData pd = </span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (PersonData) theBinding.entryToObject(dataEntry);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String fullName = pd.getFamiliarName() + &quot; &quot; + </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pd.getSurname();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; resultEntry.setData(fullName.getBytes(&quot;UTF-8&quot;));</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } catch (IOException willNeverOccur) {}</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return true;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} </span></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">然后你可以向下面的方法使用你的键创建器</span></tt></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.bind.tuple.TupleBinding;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Environment;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.SecondaryDatabase;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.SecondaryConfig;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Environment myEnv = null;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">Database myDb = null;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">SecondaryDatabase mySecDb = null;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; TupleBinding myDataBinding = new MyTupleBinding();</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //</span></strong><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">创建键创建器</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; FullNameKeyCreator fnkc = new FullNameKeyCreator(myDataBinding);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; SecondaryConfig mySecConfig = new SecondaryConfig();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">设置键创建器</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; mySecConfig.setKeyCreator(fnkc);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; String secDbName = &quot;mySecondaryDatabase&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; mySecDb = myEnv.openSecondaryDatabase(null, secDbName, myDb, </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mySecConfig);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (DatabaseException de) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} finally {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (mySecDb != null) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mySecDb.close();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (myDb != null) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;myDb.close(); </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (myEnv != null) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myEnv.close();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; } catch (DatabaseException dbe) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>二级库的配置设置</strong></div>
<div style="MARGIN-LEFT: 21pt"><strong><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong>可以通过<tt><span style="FONT-SIZE: 12pt">SecondaryConfig</span></tt><tt><span style="FONT-SIZE: 12pt">来配置二级库，SecondaryConfig是 DatabaseConfig</span></tt>的子类。所以你可以使用<tt><span style="FONT-SIZE: 12pt">DatabaseConfig</span></tt><tt><span style="FONT-SIZE: 12pt">的一些信息。</span></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; SecondaryConfig</span></tt><tt><span style="FONT-SIZE: 12pt">支持如下方法。</span></tt></div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><span>n<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>SecondaryConfig.setAllowPopulate()</div>
<div style="MARGIN-LEFT: 42pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>如果设置为true，则表示二级库允许自动填充。当primary database中的内容加进来后自动也会把secondary里的数据也填充进来。</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><span>n<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>SecondaryConfig.setKeyCreator()</div>
<div style="MARGIN-LEFT: 42pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>设置要使用的键创建器</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>读二级库的数据</strong></div>
<div style="MARGIN-LEFT: 21pt"><strong><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong>你可以通过<tt><span style="FONT-SIZE: 12pt">SecondaryDatabase.get()</span></tt><tt><span style="FONT-SIZE: 12pt">或使用SecondaryCursor</span></tt>.<tt><span style="FONT-SIZE: 12pt">来读取二级库的信息。与primary database不同的是data不是直接返回给你，而是返回给你对应的primary database中的key和data和二级库中对应的key.</span></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">如果二级库支持多重记录，则只返回第一条对应的数据。如果想看其他的只能通过SecondaryCursor(二级库游标)了。</span></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">使用示例：</span></tt></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.LockMode;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.OperationStatus;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.SecondaryDatabase;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; ...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; String searchName = &quot;John Doe&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry searchKey = </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new DatabaseEntry(searchName.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry primaryKey = new DatabaseEntry();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry primaryData = new DatabaseEntry();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">通过</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">searchKey</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">查找</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">primary database</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">的</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">key</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">和</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">value</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; <strong>OperationStatus retVal = mySecondaryDatabase.get(null, searchKey, </strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">primaryKey, primaryData, LockMode.DEFAULT); </span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (Exception e) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>删除二级库的记录</strong></div>
<div style="MARGIN-LEFT: 21pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>通常来讲你不能够直接修改二级库的记录，而只能通过修改primary database来达到修改二级库的目的。但是你可以直接通过<tt><span style="FONT-SIZE: 12pt">econdaryDatabase.delete()</span></tt><tt><span style="FONT-SIZE: 12pt">来删除二级库的记录。但是如果你的库支持多重记录，那么只能删除匹配的第一条。</span></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">使用示例：</span></tt></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.OperationStatus;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.SecondaryDatabase;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; ...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; String searchName = &quot;John Doe&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry searchKey = </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new DatabaseEntry(searchName.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">删除匹配</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">JOHN DOE</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">键的第一个二级库的记录</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; OperationStatus retVal = mySecondaryDatabase.delete(</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">null, searchKey);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (Exception e) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>使用二级库游标</strong></div>
<div style="MARGIN-LEFT: 21pt"><strong><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong>跟primary database一样你同样可以使用游标来操作数据。当你使用二级库游标的去记录的时候，都会包含primary的记录。<tt><span style="FONT-SIZE: 12pt">SecondaryCursor.getSearchBoth()</span></tt><tt><span style="FONT-SIZE: 12pt">来搜索并不是搜索key/value对，而是搜索key和primary key.</span></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">使用示例：</span></tt></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.LockMode;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.OperationStatus;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.SecondaryDatabase;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.SecondaryCursor;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; ...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; String secondaryName = &quot;John Doe&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry secondaryKey = </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new DatabaseEntry(secondaryName.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry foundData = new DatabaseEntry();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; SecondaryCursor mySecCursor = </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mySecondaryDatabase.openSecondaryCursor(null, null);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; <strong>OperationStatus retVal = mySecCursor.getSearchKey(secondaryKey, </strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; foundData, LockMode.DEFAULT);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; while (retVal == OperationStatus.SUCCESS) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mySecCursor.delete();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>retVal = mySecCursor.getNextDup(secondaryKey, </strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foundData, LockMode.DEFAULT);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; } </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (Exception e) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Exception handling goes here</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">}</span></div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>关联database</strong></div>
<div style="MARGIN-LEFT: 21pt"><strong><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong>如果你创建了两个或两个以上的二级库，你可以通过<tt><span style="FONT-SIZE: 12pt">JoinCursor</span></tt>.来把他们关联起来，可以采用JoinCursor来实现多维度的查询，例如可以查询</div>
<div style="MARGIN-LEFT: 21pt">String theColor = &quot;red&quot;;</div>
<div style="MARGIN-LEFT: 21pt">String theType = &quot;minivan&quot;;</div>
<div style="MARGIN-LEFT: 21pt">String theMake = &quot;Toyota&quot;;</div>
<div style="MARGIN-LEFT: 21pt">来实现直接查找这些指定数据的记录。与普通的游标比较起来是可以对data域进行查询，与单个次级数据库游标查询比较起来是可以实现多个条件的联立查询。</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><span>1)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>使用Join Cursor</div>
<div style="MARGIN-LEFT: 84pt; TEXT-INDENT: -21pt"><span>a)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>打开两个或多个跟同一个primary database关联的二级库</div>
<div style="MARGIN-LEFT: 84pt; TEXT-INDENT: -21pt"><span>b)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>对每个二级库分别定义游标。</div>
<div style="MARGIN-LEFT: 84pt; TEXT-INDENT: -21pt"><span>c)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>创建secondary cursors数组</div>
<div style="MARGIN-LEFT: 84pt; TEXT-INDENT: -21pt"><tt><span>d)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt>通过<tt><span style="FONT-SIZE: 12pt">Database.join()</span></tt><tt><span style="FONT-SIZE: 12pt">方法来建立关系</span></tt></div>
<div style="MARGIN-LEFT: 84pt; TEXT-INDENT: -21pt"><span>e)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><tt><span style="FONT-SIZE: 12pt">通过JoinCursor.getNext()方法来遍历相关记录直到OperationStatus</span></tt> is not <tt><span style="FONT-SIZE: 12pt">SUCCESS</span></tt>.为止。</div>
<div style="MARGIN-LEFT: 84pt; TEXT-INDENT: -21pt"><span>f)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>关闭你的游标</div>
<div style="MARGIN-LEFT: 84pt; TEXT-INDENT: -21pt"><span>g)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>关闭你所有的二级游标。</div>
<div style="MARGIN-LEFT: 63pt">使用示例：</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.Database;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseEntry;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.DatabaseException;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.JoinCursor;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.LockMode;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.OperationStatus;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.SecondaryCursor;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.SecondaryDatabase;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">// Query strings:</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String theColor = &quot;red&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String theType = &quot;minivan&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">String theMake = &quot;Toyota&quot;;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">SecondaryCursor colorSecCursor = null;</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">SecondaryCursor typeSecCursor = null;</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">SecondaryCursor makeSecCursor = null;</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">JoinCursor joinCursor = null;</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">// </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">这些是用来做查询用的</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">DatabaseEntry foundKey = new DatabaseEntry();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">DatabaseEntry foundData = new DatabaseEntry();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry color = new DatabaseEntry(theColor.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry type = new DatabaseEntry(theType.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DatabaseEntry make = new DatabaseEntry(theMake.getBytes(&quot;UTF-8&quot;));</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">创建二级库游标</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">:</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; <strong>&nbsp;colorSecCursor = automotiveColorDB.openSecondaryCursor(</strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">null, null); </span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; typeSecCursor = automotiveTypeDB.openSecondaryCursor(</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">null, null); </span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; makeSecCursor = automotiveMakeDB.openSecondaryCursor(</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">null, null); </span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">查询条件</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; <strong>OperationStatus colorRet = </strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; colorSecCursor.getSearchKey(color, foundData, LockMode.DEFAULT);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; OperationStatus typeRet = </span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; typeSecCursor.getSearchKey(type, foundData, LockMode.DEFAULT);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; OperationStatus makeRet = </span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; makeSecCursor.getSearchKey(make, foundData, LockMode.DEFAULT);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // If all our searches returned successfully, we can proceed</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; if (colorRet == OperationStatus.SUCCESS &amp;&amp;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; typeRet == OperationStatus.SUCCESS &amp;&amp;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; makeRet == OperationStatus.SUCCESS) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Get a secondary cursor array and populate it with our</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">创建</span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">SecondaryCursor</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>SecondaryCursor[] cursorArray = {colorSecCursor,</strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; typeSecCursor, makeSecCursor, null};</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Create the join cursor</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BORDER-RIGHT: windowtext 1pt solid; PADDING-RIGHT: 0cm; BORDER-TOP: windowtext 1pt solid; PADDING-LEFT: 0cm; BACKGROUND: silver 0% 50%; PADDING-BOTTOM: 0cm; BORDER-LEFT: windowtext 1pt solid; PADDING-TOP: 0cm; BORDER-BOTTOM: windowtext 1pt solid; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; joinCursor = automotiveDB.join(cursorArray, null);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Now iterate over the results, handling each in turn</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while (joinCursor.getNext(foundKey, foundData, LockMode.DEFAULT) ==</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OperationStatus.SUCCESS) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Do something with the key and data retrieved in</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // foundKey and foundData</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (DatabaseException dbe) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Error reporting goes here</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} catch (Exception e) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // Error reporting goes here</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} finally {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Make sure to close out all our cursors</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (colorSecCursor != null) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; colorSecCursor.close();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (typeSecCursor != null) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; typeSecCursor.close();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (makeSecCursor != null) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; makeSecCursor.close();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (joinCursor != null) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; joinCursor.close();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; } catch (DatabaseException dbe) {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Error reporting goes here</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">} </span></div>
<div style="MARGIN-LEFT: 63pt">&nbsp;</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>配置JoinCursor </strong></div>
<div style="MARGIN-LEFT: 21pt"><strong><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong>你可以通过<tt><span style="FONT-SIZE: 12pt">JoinConfig</span></tt><tt><span style="FONT-SIZE: 12pt">来配置joinCursor,JoinConfig只有一个方法。</span></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; JoinConfig.setNoSort()</span></tt><tt><span style="FONT-SIZE: 12pt">，如果设置为true，则表示不使用自动排序，false的时候则按照关联少的到关联多的方式排序。</span></tt></div>
<div style="MARGIN-LEFT: 21pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">使用示例：</span></tt></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">JoinConfig config = new JoinConfig();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">config.setNoSort(true);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">JoinCursor joinCursor = myDb.join(cursorArray, config); </span></div>
<div style="MARGIN-LEFT: 21pt; TEXT-INDENT: -21pt"><strong><span>八、<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong>数据的备份和恢复</strong></div>
<div><strong><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></strong>在通常情况下你可以通过把你的database文件移动到安全的地方来保护你的数据。可能下面这些情况可能需要你额外需要考虑的</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>数据库和日志</strong></div>
<div><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>在了解数据备份和恢复前你有必要了解下JE database的内部数据结构、日志文件<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>和内存CACHE。</div>
<div><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; JE</span>以追加的方式向日志文件中添加数据，这意味着你日志文件永远不会被覆盖，<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>修改和删除。日志文件的命名是NNNNNNNN.jdb，NNNNNNNN是八进制的数字，第<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>一个日志文件名是00000000.jdb,以后每增加一个则加一。每个日志文件的最大大小默认<span>&nbsp;&nbsp;&nbsp; </span>是10000000 bytes ,当日志文件超过这个大小后就会在生成一个日志文件，但你可以通<span>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>过修改je.log.fileMax来修改默认的日志文件的大小。</div>
<div><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>因为JE使用不覆盖的方式来写日志文件，所以过一段时间必须得清理或压缩下日<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>志文件用来释放更多的磁盘空间。JE使用后台线程来清理任务。如果这个日志文件已<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>经不在使用，那么清理器就会自动帮你删除或给你加个删除标记。</div>
<div><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; JE databases</span>采用BTree的方式组织，当记录被添加、修改或删除，实际上这些操<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>作都是控制BTree的子节点，比如说更改一个节点到另外一个父节点下。</div>
<div><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>数据库修改和同步，当对数据进行操作的时候，操作是直接操作内存中的BTree<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>子节点的，如果你的database不支持事务，则cache是唯一的，以保证相互间的修改不<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>会产生冲突。这种不时时把数据同步到磁盘其实是比较好的，因为他减少了频繁的IO<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>读取，从而提高了速度。但是如果你的数据要求十时性很强，你可以手动调用<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><tt><span style="FONT-SIZE: 12pt">Environment.sync()</span></tt>来时时的把数据同步到你的磁盘中，但这样可能会带来IO的繁忙。</div>
<div><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>其实一但当环境被打开，JE就会尝试着从日志文件中恢复那些被丢失的节点</div>
<div><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>你可以选择热备份和冷备份两种，但他都数据完全备份（也就是说所有的数据），&nbsp;<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>所以说不要把冷热备份与完全备份和增量备份相混淆。</div>
<div><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>所谓的热备份就是在你的程序还在运行的时候把所有的*.jdb文件COPY出去，这<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>这样的好处是你不必停止你的服务。但这样当前CACHE在内存中的数据还没有被备份<span>&nbsp;&nbsp;&nbsp;&nbsp; </span>下来。</div>
<div><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>离线备份比较完全，但他的缺点也是显而易见的，你必须终止你的服务。首先你要<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>终止你的写操作，然后调用<tt><span style="FONT-SIZE: 12pt">Environment.sync()</span></tt><tt><span style="FONT-SIZE: 12pt">方法来把你内存中的数据同步<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>到硬盘中去，关闭你的游标，你的数据库,你的环境，这个时候把所有的.jdb&nbsp;文件COPY出去就行了。</span></tt></div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>使用备份帮助类</strong></div>
<div><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; JE</span></tt><tt><span style="FONT-SIZE: 12pt">提供了DbBackup 这个类来协助你保护好你的数据。</span></tt></div>
<div><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></tt><tt><span style="FONT-SIZE: 12pt">使用示例：</span></tt></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">package je.gettingStarted;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">import com.sleepycat.je.util.DbBackup;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; Environment env = new Environment(...);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; DbBackup backupHelper = new DbBackup(env);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">找到前一次备份的版本号</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">检查保存状态</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; long lastFileCopiedInPrevBackup =&nbsp;...</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">开始备份，检查你要备份那些文件</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; backupHelper.startBackup();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; try {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>&nbsp;String[] filesForBackup =</strong></span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">backupHelper.getLogFilesInBackupSet(lastFileCopiedInPrevBackup);</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">复制文件</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myApplicationCopyMethod(filesForBackup)</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // </span><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">保存你本次备份的信息</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lastFileCopiedInPrevBackup = backupHelper.getLastFileInBackupSet();</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myApplicationSaveLastFile(lastFileCopiedInBackupSet);</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; }</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp; finally {</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Remember to exit backup mode, or all log files won't be cleaned</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // and disk usage will bloat.</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; backupHelper.endBackup();</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&nbsp; } </span></div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>灾难恢复</strong></div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><span>1.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>停止你的服务</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><span>2.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>删除所有的在你环境所在目录的内容</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><span>3.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>把你的备份COPY到你的目录中</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><span>4.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>如果你是backup的增量方式备份你的环境目录，请COPY最新的哪个版本（翻译的不是十分准确原文如下：If you are using a backup utility that runs incremental backups of your environment directory, copy any log files generated since the time of your last full backup. Be sure to restore all log files in the order that they were written. The order is important because it is possible the same log file appears in multiple archives, and you want to run recovery using the most recent version of each log file）</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><span>5.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>重新打开你的环境，恢复你的服务。</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>热备份</strong></div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><span>1.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>从你的环境中复制所有的.jdb文件到你想要备份的地方，不管是热备份还是离线备份都要这么做。在备份前要确保你把内存中的数据也同步到了磁盘中去了。这个阶段属于完全备份。</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><span>2.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>然后定期复制新生成的那些.jdb文件。</div>
<div style="MARGIN-LEFT: 63pt; TEXT-INDENT: -21pt"><span>3.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>删除那些已经做了删除标记的旧的jdb文件（通常是调用cleaner产生的）。</div>
<div style="MARGIN-LEFT: 21pt; TEXT-INDENT: -21pt"><strong><span>九、<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong><strong>BDB</strong><strong>针对应用的一些管理</strong></div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>用je.properties</strong><strong>来初始化一些配置信息</strong></div>
<div style="MARGIN-LEFT: 42pt"><tt><span style="FONT-SIZE: 12pt">&nbsp;&nbsp;&nbsp; je.properties</span></tt><tt><span style="FONT-SIZE: 12pt">必须位于你环境的主目录下，且名称必须是je.properties.</span></tt></div>
<div style="MARGIN-LEFT: 42pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; je</span>使用一些后台的线程来对你的环境进行预配置，这些后台线程包括如下：</div>
<div style="MARGIN-LEFT: 84pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Cleaner thread. 主要是进行一些清理性工作，当环境进行写操作的时候才启动。</div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><tt><strong><span>1)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong></tt><tt><strong><span style="FONT-SIZE: 12pt">je.cleaner.minUtilization</span></strong></tt></div>
<div style="MARGIN-LEFT: 84pt"><tt><strong><span style="FONT-SIZE: 12pt">&nbsp;&nbsp; </span></strong></tt><tt><span style="FONT-SIZE: 12pt">主要是用来确保腾出一定的空间来存放记录。如果空间不够用了则移出一些旧的不在使用的记录，默认这个空间占50%。</span></tt></div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><tt><strong><span style="FONT-SIZE: 12pt">2)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span></strong></tt><tt><strong><span style="FONT-SIZE: 12pt">je.cleaner.expunge</span></strong></tt></div>
<div style="MARGIN-LEFT: 84pt"><tt><strong><span style="FONT-SIZE: 12pt">&nbsp;&nbsp; </span></strong></tt><tt><span style="FONT-SIZE: 12pt">主要是用来确认一个日志文件是否已经没用，可以被删除了，如果一个日志由原先的NNNNNNNN.jdb</span></tt> 名称被修改为<tt><span style="FONT-SIZE: 12pt">NNNNNNNN.del</span></tt>名称那么你要对这进行一些处理。</div>
<div style="MARGIN-LEFT: 84pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Compressor thread 用来压缩一些已经删除的，被修改了的没用的BTree节点，当环境发生写操作的时候才触发。</div>
<div style="MARGIN-LEFT: 84pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>Checkpointer thread，检查你的环境，本编程总是运行。</div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>Sizing the Cache</strong><strong>内存中CACHE</strong><strong>大小的设置</strong></div>
<div style="MARGIN-LEFT: 63pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>你可以使用 EnvironmentMutableConfig.setCachePercent()来修改</div>
<div style="MARGIN-LEFT: 63pt">je.maxMemoryPercent属性来改变je能够使用的最大内存的占整个JVM虚拟机内存的百分比。</div>
<div style="MARGIN-LEFT: 63pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>你也可以通过使用EnvironmentConfig.setCacheSize().来改变je.maxMemory中设置的JE能够使用的最大内存。</div>
<div style="MARGIN-LEFT: 63pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>你也可以通过调用<tt><span style="FONT-SIZE: 12pt">EnvironmentStats.getNCacheMiss()</span></tt><tt><span style="FONT-SIZE: 12pt">来取得当前有多少数据没有通过内存的方式来命中。</span></tt></div>
<div style="MARGIN-LEFT: 42pt; TEXT-INDENT: -21pt"><span>l<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><strong>命令行工具</strong></div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>1)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>DbDump，把database转换成一种可读的形式，通常用来导出数据。</div>
<div style="MARGIN-LEFT: 84pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>参数如下：</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>①.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;f ：指定把数据输出到那个文件中，如果没有指定则输出到控制台（也就是屏幕）。</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>②.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;h ：用来指定环境所在目录，这个参数必须指定。</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>③.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;l ：列出当前环境的数据库名，如果没有指定-s着此参数必选。</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>④.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;p ：以可读的方式输出数据库记录</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>⑤.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;r :这个操作通过不同的排序方式输出一些经过整理的那些有用的数据数据，通常如果指定你的数据库名为dbname,则他会把结果输出到dbname.dump(翻译的不是太准确原文如下：Salvage data from a possibly corrupt file. When used on a uncorrupted database, this option should return data equivalent to a normal dump, but most likely in a different order. This option causes the ensuing output to go to a file named dbname.dump where dbname is the name of the database you are dumping. The file is placed in the current working directory.)</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>⑥.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;R ：跟-r有所不同，他输出的是所有的数据包括被删除的和没有被删除的（原文如下：Aggressively salvage data from a possibly corrupt file. This option differs from the -r option in that it will return all possible data from the file at the risk of also returning already deleted or otherwise nonsensical items. Data dumped in this fashion will almost certainly have to be edited by hand or other means before the data is ready for reload into another database. This option causes the ensuing output to go to a file named dbname.dump where dbname is the name of the database you are dumping. The file is placed in the current working directory.）</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><tt><span>⑦.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt><tt><span style="FONT-SIZE: 12pt">&ndash;s</span></tt><tt><span style="FONT-SIZE: 12pt">：指定数据库名称 如果没有指定-l参数，则此参数必选。</span></tt></div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><tt><span>⑧.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt><tt><span style="FONT-SIZE: 12pt">&ndash;v</span></tt><tt><span style="FONT-SIZE: 12pt">：确定显示信息是按照-r模式还是按照-R模式</span></tt></div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><tt><span>⑨.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span></tt><tt><span style="FONT-SIZE: 12pt">&ndash;V:</span></tt><tt><span style="FONT-SIZE: 12pt">打印数据库版本后推出</span></tt></div>
<div style="MARGIN-LEFT: 105pt"><tt><span style="FONT-SIZE: 12pt">使用示例：</span></tt></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&gt; java com.sleepycat.je.util.DbDump -h . -p -s VendorDB&nbsp;</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">VERSION=3</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">format=print</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">type=btree</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">database=VendorDB</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">dupsort=false</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">HEADER=END</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;Mom's Kitchen</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;sr/01/01xpt/00/0d53 Yerman Ct.t/00/0c763 554 9200t/00/0bMiddle Townt/00</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;/0eMaggie Kultgent/00/10763 554 9200 x12t/00/02MNt/00/0dMom's Kitchent/00</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;/0555432</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;Off the Vine</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;sr/01/01xpt/00/10133 American Ct.t/00/0c563 121 3800t/00/0aCentennialt/00</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;/08Bob Kingt/00/10563 121 3800 x54t/00/02IAt/00/0cOff the Vinet/00/0552002</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;Simply Fresh</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;sr/01/01xpt/00/1115612 Bogart Lanet/00/0c420 333 3912t/00/08Harrigant/00</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;/0fCheryl Swedbergt/00/0c420 333 3952t/00/02WIt/00/0cSimply Fresht/00/0</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;553704</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;The Baking Pan</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;sr/01/01xpt/00/0e1415 53rd Ave.t/00/0c320 442 2277t/00/07Dutchint/00/09</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;Mike Roant/00/0c320 442 6879t/00/02MNt/00/0eThe Baking Pant/00/0556304</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;The Pantry</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;sr/01/01xpt/00/111206 N. Creek Wayt/00/0c763 555 3391t/00/0bMiddle Town</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;t/00/0fSully Beckstromt/00/0c763 555 3391t/00/02MNt/00/0aThe Pantryt/00</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;/0555432</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;TriCounty Produce</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;sr/01/01xpt/00/12309 S. Main Streett/00/0c763 555 5761t/00/0bMiddle Townt</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;/00/0dMort Dufresnet/00/0c763 555 5765t/00/02MNt/00/11TriCounty Producet</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;/00/0555432</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">DATA=END</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&gt; </span></div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>2)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>DbLoad 导入通过DbDump方式导出的数据</div>
<div style="MARGIN-LEFT: 84pt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>常见的参数如下：</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>①.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;c: 可以指定两个参数&nbsp;database 表示将要被导入的库名 dupsort 如果为true表示数据库支持多重记录。</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>②.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;f:指定将要导入的文件</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>③.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;n: 不覆盖已经存在的值(key/value),如果存在相同的则输出警告信息。</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>④.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;h:指定环境所在的目录。</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>⑤.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;s：指定数据库的名称</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>⑥.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;t:把指定的文本信息导入到库中，文本信息必须以key/value形式成对出现。</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>⑦.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;v：输出详细信息</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>⑧.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;V：输出数据库版本；</div>
<div style="MARGIN-LEFT: 105pt">使用示例：</div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&gt; java com.sleepycat.je.util.DbDump -h . -s VendorDB -f vendordb.txt</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&gt; java com.sleepycat.je.util.DbLoad -h . -f vendordb.txt</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&gt; </span></div>
<div style="MARGIN-LEFT: 105pt; TEXT-INDENT: -21pt"><span>3)<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>DbVerify，检查数据库文件是否有错误。参数如下：</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>①.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;h:确定环境路径</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>②.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;q:禁止输出详细的调试信息，只输出成功还是失败。</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>③.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;s：确定数据库的名称。</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>④.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;v：输出每个节点信息。</div>
<div style="MARGIN-LEFT: 126pt; TEXT-INDENT: -21pt"><span>⑤.<span style="FONT: 7pt 'Times New Roman'; font-size-adjust: none; font-stretch: normal">&nbsp;&nbsp;&nbsp;&nbsp; </span></span>&ndash;V：输出数据库版本信息。</div>
<div style="MARGIN-LEFT: 105pt">使用示例：<span>&nbsp;&nbsp;&nbsp; </span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><strong><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&gt; java com.sleepycat.je.util.DbVerify -h . -s VendorDB</span></strong></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&lt;BtreeStats&gt;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&lt;BottomInternalNodesByLevel total=&quot;1&quot;&gt;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&lt;Item level=&quot;1&quot; count=&quot;1&quot;/&gt;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&lt;/BottomInternalNodesByLevel&gt;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&lt;InternalNodesByLevel total=&quot;1&quot;&gt;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&nbsp;&lt;Item level=&quot;2&quot; count=&quot;1&quot;/&gt;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&lt;/InternalNodesByLevel&gt;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&lt;LeafNodes count=&quot;6&quot;/&gt;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&lt;DeletedLeafNodes count=&quot;0&quot;/&gt;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&lt;DuplicateCountLeafNodes count=&quot;0&quot;/&gt;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&lt;MainTreeMaxDepth depth=&quot;2&quot;/&gt;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&lt;DuplicateTreeMaxDepth depth=&quot;0&quot;/&gt;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left"><span style="BACKGROUND: silver 0% 50%; moz-background-clip: -moz-initial; moz-background-origin: -moz-initial; moz-background-inline-policy: -moz-initial">&lt;/BtreeStats&gt;</span></div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
<div style="MARGIN-LEFT: 105pt" align="right">Write by 延年</div>
<div style="MARGIN-LEFT: 105pt" align="right">Date 2007-8-3</div>
<div style="MARGIN-LEFT: 105pt" align="right">Email:myn@163.com</div>
<div style="MARGIN-LEFT: 84pt" align="left">&nbsp;</div>
</div>

<div class="share_buttons" id="sharePanel"></div>
<div class="article_next_prev">
    <li class="prev_article"><span>上一篇：</span><a href="http://blog.csdn.net/muyannian/article/details/1717468">Berkeley DB Java Edition 基本示例</a></li>
    <li class="next_article"><span>下一篇：</span><a href="http://blog.csdn.net/muyannian/article/details/1732968">Cache替换方案</a></li>
</div>


</div>

<div id="panel_Category" class="panel">
<ul class="panel_head"><span>文章分类</span></ul>
<ul class="panel_body">
<li>
<a href="http://blog.csdn.net/muyannian/article/category/324788">BDB</a><span>(5)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/category/324784">BDB</a><span>(0)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/category/324785">javascript</a><span>(0)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/category/324783">lucene</a><span>(3)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/category/362415">WEB开发</a><span>(3)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/category/324787">工作</a><span>(0)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/category/324786">生活</a><span>(0)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/category/325965">算法</a><span>(1)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/category/341356">职场 </a><span>(1)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/category/341355">职场生涯</a><span>(0)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/category/1275950">hadoop</a><span>(2)</span>
</li>
</ul>
</div>
<div id="hotarticls" class="panel">
<ul class="panel_head"><span>阅读排行</span></ul>
<ul class="panel_body itemlist">
<li>
<a href="http://blog.csdn.net/muyannian/article/details/1723971" title="Berkeley DB Java Edition 使用手册">Berkeley DB Java Edition 使用手册</a><span>(10444)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/details/1929712" title="Berkeley DB for C 使用手册">Berkeley DB for C 使用手册</a><span>(6020)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/details/1717468" title="Berkeley DB Java Edition 基本示例">Berkeley DB Java Edition 基本示例</a><span>(2705)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/details/1897139" title="关于c#实现影音嗅探的问题">关于c#实现影音嗅探的问题</a><span>(2213)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/details/7339994" title="lucene索引结构改进-支持单机十亿级别的索引的检索">lucene索引结构改进-支持单机十亿级别的索引的检索</a><span>(1913)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/details/2068111" title="javascript跨域请求数据常见的几个变通的方法">javascript跨域请求数据常见的几个变通的方法</a><span>(1868)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/details/1732968" title="Cache替换方案">Cache替换方案</a><span>(1790)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/details/1867725" title="转载--memcached缓存服务器的安装">转载--memcached缓存服务器的安装</a><span>(1323)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/details/7339989" title="不需要smtp服务器的邮件发送">不需要smtp服务器的邮件发送</a><span>(1127)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/details/2079059" title="星型结构数据一致性的问题（数据同步有可能冲突）">星型结构数据一致性的问题（数据同步有可能冲突）</a><span>(1111)</span>
</li>
</ul>
</div>
<div id="hotarticls2" class="panel">
<ul class="panel_head"><span>评论排行</span></ul>
<ul class="panel_body itemlist">
<li>
<a href="http://blog.csdn.net/muyannian/article/details/1723971" title="Berkeley DB Java Edition 使用手册">Berkeley DB Java Edition 使用手册</a><span>(7)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/details/1717468" title="Berkeley DB Java Edition 基本示例">Berkeley DB Java Edition 基本示例</a><span>(3)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/details/7339994" title="lucene索引结构改进-支持单机十亿级别的索引的检索">lucene索引结构改进-支持单机十亿级别的索引的检索</a><span>(2)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/details/1897139" title="关于c#实现影音嗅探的问题">关于c#实现影音嗅探的问题</a><span>(2)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/details/8157007" title="带索引的HIVE">带索引的HIVE</a><span>(1)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/details/1824686" title="学会say no 六大主因让职场人士甘做加班奴">学会say no 六大主因让职场人士甘做加班奴</a><span>(1)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/details/7339989" title="不需要smtp服务器的邮件发送">不需要smtp服务器的邮件发送</a><span>(1)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/details/8157010" title=".带索引的mapReduce">.带索引的mapReduce</a><span>(0)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/details/2079059" title="星型结构数据一致性的问题（数据同步有可能冲突）">星型结构数据一致性的问题（数据同步有可能冲突）</a><span>(0)</span>
</li>
<li>
<a href="http://blog.csdn.net/muyannian/article/details/2068690" title="【转】怎样把XML+XSLT解释成最终的HTML">【转】怎样把XML+XSLT解释成最终的HTML</a><span>(0)</span>
</li>
</ul>
</div>
</body>
</html>